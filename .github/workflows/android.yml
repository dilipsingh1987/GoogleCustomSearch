name: firebase app distribution
on:
  push:
    branches:
      - master
  pull_request:
    types: [opened, synchronize]
jobs:
  build-android:
    runs-on: macOS-10.15
    steps:
      - uses: actions/checkout@v1
      - name: set up JDK 1.8
        uses: actions/setup-java@v1
        with:
         java-version: 1.8
      - name: generating debug keystore and SHA1 key
        shell: powershell
        run: |
            md \Users\runneradmin\.android
            keytool -genkey -dname "cn=GoogleCustomSearch, ou=DSCBVPPUNE, o=Google, l=Pune, st=Maharashtra, c=IN" -keystore \Users\runneradmin\.android\debug.keystore -storepass android -alias AndroidDebugKey -keyalg RSA -keysize 4096 -validity 10000 -v

      - name: import keystore pkcs12
        shell: powershell
        run: keytool -importkeystore -srckeystore \Users\runneradmin\.android\debug.keystore -destkeystore \Users\runneradmin\.android\debug.keystore -deststoretype pkcs12
      - name: build release
        run:  bash ./gradlew assembleRelease